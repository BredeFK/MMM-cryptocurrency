var NodeHelper = require('node_helper')
var request = require('request')

module.exports = NodeHelper.create({
  start: function () {
    console.log('Cryptocurrency module loaded!')
  },

  socketNotificationReceived: function (notification, payload) {
    if (notification === 'get_ticker') {
      this.getTickers(payload)
    }
  },

  getTickers: function (url) {
    var self = this
    request({url: url, method: 'GET'}, function (error, response, body) {
      if (!error && response.statusCode == 200) {
        self.sendSocketNotification('got_result', JSON.parse(body))
      }
    })
  },

  sparklines: {
    bitcoin: 1,
    ethereum: 1027,
    ripple: 52,
    litecoin: 2,
    'ethereum-classic': 1321,
    nem: 873,
    stratis: 1343,
    'bitcoin-cash': 1831,
    'bitcoin-gold': 2083,
    cardano: 2010,
    dash: 131,
    eos: 1765,
    monero: 328,
    neo: 1376,
    stellar: 512,
    iota: 1720,
    tron: 1958,
    qtum: 1684,
    omisego: 1808,
    airswap: 2058,  
    aelf: 2299,
    aeternity: 1700,
    aion: 2062,
    ardor: 1320,
    ark: 1586,
    augur: 1104,
    bancor: 1727,
    'basic-attention-token': 1697,
    'binance-coin': 1839,
    bitcoin: 1,
    'bitcoin-cash': 1831,
    'bitcoin-gold': 2083,
    bitshares: 463,
    byteball: 1492,
    'bytecoin-bcn': 372,
    bytom: 1866,
    cardano: 2010,
    chainlink: 1975,
    cindicator: 2043,
    cryptonex: 2027,
    dash: 131,
    decred: 1168,
    dent: 1886,
    dentacoin: 1876,
    digibyte: 109,
    digixdao: 1229,
    dogecoin: 74,
    dragonchain: 2243,
    electroneum: 2137,
    emercoin: 558,
    'enigma-project': 2044,
    eos: 1765,
    ethereum: 1027,
    'ethereum-classic': 1321,
    ethos: 1817,
    'experience-points': 1367,
    factom: 1087,
    funfair: 1757,
    gas: 1785,
    'golem-network-tokens': 1455,
    gxshares: 1750,
    hshare: 1903,
    icon: 2099,
    iota: 1720,
    kin: 1993,
    komodo: 1521,
    'kucoin-shares': 2087,
    'kyber-network': 1982,
    lisk: 1214,
    litecoin: 2,
    loopring: 1934,
    maidsafecoin: 291,
    maker: 1518,
    medibloc: 2303,
    monacoin: 213,
    monero: 328,
    neblio: 1955,
    'nebulas-token': 1908,
    nem: 873,
    neo: 1376,
    nexus: 789,
    nxt: 66,
    omisego: 1808,
    particl: 1826,
    pillar: 1834,
    pivx: 1169,
    populous: 1789,
    'power-ledger': 2132,
    qash: 2213,
    qtum: 1684,
    quantstamp: 2212,
    raiblocks: 1567,
    rchain: 2021,
    reddcoin: 118,
    'request-network': 2071,
    ripple: 52,
    salt: 1996,
    siacoin: 1042,
    'sirin-labs-token': 2313,
    smartcash: 1828,
    status: 1759,
    steem: 1230,
    stellar: 512,
    stratis: 1343,
    substratum: 1984,
    syscoin: 541,
    tenx: 1758,
    tether: 825,
    'time-new-bank': 2235,
    tron: 1958,
    vechain: 1904,
    verge: 693,
    veritaseum: 1710,
    walton: 1925,
    waves: 1274,
    wax: 2300,
    zcash: 1437,
    zclassic: 1447,
    zcoin: 1414
  }

})